<div class="LayoutPublic__ScrollContainer-eo9rav-2 hqNxSW" id="top"><div class="LayoutPublic__MaxWidthWrapper-eo9rav-5 PblvT"><div class="LayoutPublic__StickyInnerWrapper-eo9rav-3 hqHBnv"><nav class="LayoutPublic__StickyWrapper-eo9rav-4 eDqBia"><div class="UIExpandableSection__ExpandableWrapper-kkkoxf-1 bcEUEW"><div class="UIExpandableSection__ExpandableHeader-kkkoxf-2 Toc__Header-sc-1btdpjk-3 icbRfW"><div aria-expanded="false" role="button" aria-disabled="false" class="private-clickable UIClickable-sc-8i9d6r-0 gZtlms UIExpandableSection__ExpandableButton-kkkoxf-3 bsucBI Toc__ExpandableOpener-sc-1btdpjk-0 gLQIBe" tabindex="0"><span class="UIExpandableSection__ExpandableCaretHolder-kkkoxf-5 ilMUvI"><span class="private-icon private-icon__high Toc__ExpandableCaret-sc-1btdpjk-1 cBjmlo" data-icon-name="down" style="color: rgb(124, 152, 182); font-size: 18px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kudMjo"></span></span></span><h2 aria-level="2" class="Heading-sc-6n9fru-0 H7-l0lpd8-0 fHpVzv UIExpandableSection__ExpandableTitle-kkkoxf-4 Toc__Title-sc-1btdpjk-4 gytBqn" role="presentation"><i18n-string data-locale-at-render="en-US" data-key="developer-docs-ui.tableOfContentsNav.title">On this page</i18n-string></h2></div></div><div data-open-complete="false" class="TwoWayTransition__PlainWrapper-sc-469kez-0 iKxkDE AccordionTransition__AccordionTransitionWrapper-sc-1p994vd-0 fDHukD" data-transition-wrapper="true"></div></div></nav></div><article class="Article-sc-3fs8hq-0 llwuKq"><div class="MDXPage__GutterWrapper-jxrjj7-0 hzjBfc"><nav role="navigation" class="private-breadcrumbs DocsBreadcrumbs__Breadcrumbs-q4x7he-0 ditIvL private-breadcrumbs--flush private-breadcrumbs--no-wrap"><a class="private-link uiLinkWithoutUnderline DocsBreadcrumbs__BreadcrumbLink-q4x7he-1 ZhwHh private-breadcrumbs__item uiLinkDark" href="/beta-docs/reference/api" tabindex="0" aria-disabled="false"><span>API Endpoints</span></a><span class="DocsBreadcrumbs__BreadcrumbSpan-q4x7he-2 AskWu private-breadcrumbs__item"><span><span class="private-icon private-icon__low private-breadcrumbs__arrow" data-icon-name="right"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 dOvfXS"></span></span>Automation</span></span><span aria-current="location" class="DocsBreadcrumbs__BreadcrumbSpan-q4x7he-2 AskWu private-breadcrumbs__item"><span><span class="private-icon private-icon__low private-breadcrumbs__arrow" data-icon-name="right"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 dOvfXS"></span></span>Workflows | Custom Code Actions</span></span></nav><div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h1 id="custom-code-workflow-actions" class="PublicH1__H1Component-pix4lw-0 boSuOv align-center"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#custom-code-workflow-actions" tabindex="0" aria-disabled="false">Custom code workflow actions</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h1></div>

<p>In workflows, use the <em>Custom code</em> action to write and execute JavaScript or Python (<em>in beta</em>). With custom code actions, you can extend workflow functionality within and outside of HubSpot. To learn more about HubSpot's APIs, you can refer to either the <a class="private-link uiLinkWithoutUnderline Link__StyledRouterLink-sc-1jdjaej-1 sGvXg uiLinkDark" href="/beta-docs/guides/api/overview" tabindex="0" aria-disabled="false">developer documentation</a> for the latest versions or the <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://developers.hubspot.com/" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">legacy developer documentation<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a> for our older APIs. To see examples of common custom code actions, view <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://www.hubspot.com/programmable-automation-use-cases" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">HubSpot's Programmable Automation Use Cases<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a>.</p>
<p>Custom code actions support JavaScript using the <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://aws.amazon.com/blogs/compute/node-js-16-x-runtime-now-available-in-aws-lambda/" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">Node 16.x runtime framework<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a>. If you're using Python for your custom code action, the custom code action will use <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://www.python.org/downloads/release/python-390/" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">Python 3.9 runtime framework<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a>. When an action executes, the runtime compute is managed through a serverless function by HubSpot and <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://aws.amazon.com/lambda/features/#:~:text=AWS%20Lambda%20is%20a%20serverless,scale%2C%20performance%2C%20and%20security." rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">AWS Lambda<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a>.</p>
<p>If you encounter any general issues implementing your custom code action, you can reach out to <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://knowledge.hubspot.com/account/get-help-with-hubspot" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">HubSpot support<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a>. However, if you're facing any issues with your written custom code, it's recommended to search and post on the <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://community.hubspot.com/t5/HubSpot-Developers/ct-p/developers" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">HubSpot Developer's Forum<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a> to get tips, advice, or help with troubleshooting your code.</p>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="node.js-supported-libraries" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#node.js-supported-libraries" tabindex="0" aria-disabled="false">Node.js supported libraries</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>If you're using Node.js, the following libraries are available for use within the code action. These libraries can be loaded using the normal <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">require()</code> function at the top of your code.</p>
<ul>
<li>@hubspot/api-client ^10</li>
<li>async ^3.2.0</li>
<li>aws-sdk ^2.744.0</li>
<li>axios ^1.2.0</li>
<li>lodash ^4.17.20</li>
<li>mongoose ^6.8.0</li>
<li>mysql ^2.18.1</li>
<li>redis" ^4.5.1</li>
<li>request" ^2.88.2</li>
<li>bluebird ^3.7.2</li>
<li>random-number-csprng ^1.0.2</li>
<li>googleapis ^67.0.0</li>
</ul>
<div class="GutterContainer__Div-sc-19j3fkg-0 esGnOK"><div aria-atomic="true" aria-live="polite" class="alert private-alert alert-warning private-alert--warning Alert__StyledAlert-sc-1uex6ov-0 eZhkNm" role="alert"><div class="private-alert__inner"><div class="private-alert__body has--vertical-spacing"><p><strong>Please note:</strong> the v4 Associations API is supported in Version 9.0.0 or later of the NodeJS HubSpot Client and in Version 8 of the NodeJS HubSpot Client.</p></div></div></div></div>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="python-supported-libraries" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#python-supported-libraries" tabindex="0" aria-disabled="false">Python supported libraries</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>If you're using Python, you can load the following libraries with an import statement at the top of your code. The import statement should be formatted as <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">from [libraryname] import [item]</code>, such as <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">from redis.client import redis</code>.</p>
<ul>
<li>requests 2.28.2</li>
<li>@hubspot/api-client ^8</li>
<li>google-api-python-client 2.74.0</li>
<li>mysql-connector-python 8.0.32</li>
<li>redis 4.4.2</li>
<li>nltk 3.8.1</li>
</ul>
<p>If you're using anything from the standard library, you can use <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">import</code>, such as <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">import os</code>.</p>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="get-started" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#get-started" tabindex="0" aria-disabled="false">Get started</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>Use the code samples below to begin using custom code workflow actions.</p>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h3 id="code-samples" class="Heading-sc-6n9fru-0 H3-n28pc5-0 MdxH3__StyledH3-lu3f7h-0 kVLOmu align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#code-samples" tabindex="0" aria-disabled="false">Code samples</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h3></div>
<p>NODE16X, v8</p>
<div class="GutterContainer__Div-sc-19j3fkg-0 hbVaIR"><div class="UITabs__StyledUITabs-sc-1yikeha-3 bzPllJ private-tabs"><div class="UITabs__StyledWrapper-sc-1yikeha-2 fgVoJO private-tabs__list__wrapper base-font-size"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU private-tabs__list" data-content="true" role="tablist"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">Node.js<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a></div><span aria-hidden="true" class="HiddenMeasure__InnerMeasure-sc-1cmy50-0 gWDZTR" style="height: 0px;"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">Node.js<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a><button aria-hidden="true" data-dropdown-tabs="0" data-more-tabs="true" aria-haspopup="true" aria-labelledby="uiabstractdropdown-button-content-2" aria-owns="uiabstractdropdown-content-3" data-dropdown-open="false" aria-disabled="false" class="uiButton private-button private-button--transparent private-button--default UITabs__ExcessTabsDropdownButton-sc-1yikeha-4 OOhVh private-button__dropdown-opener uiDropdown__button private-tabs__excess-tabs-dropdown private-button--non-responsive private-button--non-link" data-button-use="transparent" tabindex="-1" type="button"><span class="uiDropdown__buttonContents private-dropdown__button__contents" id="uiabstractdropdown-button-content-2"><span class="private-dropdown__button-label uiDropdown__buttonLabel">More</span><span class="uiDropdown__buttonCaret private-dropdown__caret"></span></span></button></div></span></div><div role="tabpanel" class="UISection__ScrollWrapper-sc-14x4ixz-0 jRdYR is--module namespaced-hack-section UITabs__TabsPanel-sc-1yikeha-1 bVPTVe p-x-0 p-y-1 private-tabs__panel"><div class="Pre__PreWrapper-jlftju-1 cTEvvy"><div class="Pre__CopyButtonContainer-jlftju-0 iOvehH"><button aria-disabled="false" class="private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__low" data-icon-name="duplicate" style="color: rgb(255, 255, 255); font-size: 16px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 jfQUVB"></span></span></button></div><div class="react-codemirror m-bottom-4"><textarea readonly="" style="display: none;">const hubspot = require('@hubspot/api-client');

exports.main = async (event, callback) =&gt; {
  /*****
    How to use secrets
    Secrets are a way for you to save API keys or private apps and set them as a variable to use anywhere in your code
    Each secret needs to be defined like the example below
  *****/

  const hubspotClient = new hubspot.Client({
    accessToken: process.env.SECRET_NAME,
  });

  let phone;
  try {
    const ApiResponse = await hubspotClient.crm.contacts.basicApi.getById(
      event.object.objectId,
      ['phone']
    );
    phone = ApiResponse.properties.phone;
  } catch (err) {
    console.error(err);
    // We will automatically retry when the code fails because of a rate limiting error from the HubSpot API.
    throw err;
  }

  /*****
    How to use inputs
    Inputs are a way for you to take data from any actions in your workflow and use it in your code instead of having to call the HubSpot API to get that same data.
    Each input needs to be defined like the example below
  *****/

  const email = event.inputFields['email'];

  /*****
    How to use outputs
    Outputs are a way for you to take data from your code and use it in later workflows actions

    Use the callback function to return data that can be used in later actions.
    Data won't be returned until after the event loop is empty, so any code after this will still execute.
  *****/

  callback({
    outputFields: {
      email: email,
      phone: phone,
    },
  });
};

/* A sample event may look like:
{
  "origin": {
    // Your portal ID
    "portalId": 1,

    // Your custom action definition ID
    "actionDefinitionId": 2,
  },
  "object": {
    // The type of CRM object that is enrolled in the workflow
    "objectType": "CONTACT",

    // The ID of the CRM object that is enrolled in the workflow
    "objectId": 4,
  },
  "inputFields": {
    // The property name for defined inputs
  },
  // A unique ID for this execution
  "callbackId": "ap-123-456-7-8"
}
*/</textarea><div class="CodeMirror cm-s-hubspot-canvas-dark CodeMirror-wrap" translate="no" style="clip-path: inset(0px); font-family: &quot;Source Code Pro&quot;, Consolas, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; width: 100%; height: auto;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 33px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" readonly="" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="bottom: 0px; width: 18px; visibility: hidden;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; visibility: hidden;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 29px; margin-bottom: 0px; border-right-width: 50px; min-height: 1394px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">hubspot</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'@hubspot/api-client'</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">exports</span>.<span class="cm-property">main</span> <span class="cm-operator">=</span> <span class="cm-keyword">async</span> (<span class="cm-def">event</span>, <span class="cm-def">callback</span>) <span class="cm-operator">=&gt;</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/*****</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  How to use secrets</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Secrets are a way for you to save API keys or private apps and set them as a variable to use anywhere in your code</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Each secret needs to be defined like the example below</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  *****/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">hubspotClient</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">hubspot</span>.<span class="cm-property">Client</span>({</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">accessToken</span>: <span class="cm-variable">process</span>.<span class="cm-property">env</span>.<span class="cm-property">SECRET_NAME</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  });</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">phone</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">try</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">ApiResponse</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable-2">hubspotClient</span>.<span class="cm-property">crm</span>.<span class="cm-property">contacts</span>.<span class="cm-property">basicApi</span>.<span class="cm-property">getById</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">event</span>.<span class="cm-property">object</span>.<span class="cm-property">objectId</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  [<span class="cm-string">'phone'</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-2">phone</span> <span class="cm-operator">=</span> <span class="cm-variable-2">ApiResponse</span>.<span class="cm-property">properties</span>.<span class="cm-property">phone</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  } <span class="cm-keyword">catch</span> (<span class="cm-def">err</span>) {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">22</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">error</span>(<span class="cm-variable-2">err</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">23</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// We will automatically retry when the code fails because of a rate limiting error from the HubSpot API.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">24</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-variable-2">err</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">25</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">26</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">27</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/*****</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">28</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  How to use inputs</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">29</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Inputs are a way for you to take data from any actions in your workflow and use it in your code instead of having to call the HubSpot API to get that same data.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">30</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Each input needs to be defined like the example below</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">31</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  *****/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">32</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">33</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">email</span> <span class="cm-operator">=</span> <span class="cm-variable-2">event</span>.<span class="cm-property">inputFields</span>[<span class="cm-string">'email'</span>];</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">34</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">35</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/*****</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">36</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  How to use outputs</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">37</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Outputs are a way for you to take data from your code and use it in later workflows actions</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">38</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">39</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Use the callback function to return data that can be used in later actions.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">40</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Data won't be returned until after the event loop is empty, so any code after this will still execute.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">41</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  *****/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">42</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">43</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">callback</span>({</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">44</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">outputFields</span>: {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">45</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">email</span>: <span class="cm-variable-2">email</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">46</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">phone</span>: <span class="cm-variable-2">phone</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">47</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  },</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">48</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  });</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">49</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">};</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">50</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">51</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* A sample event may look like:</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">52</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">{</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">53</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  "origin": {</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">54</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  // Your portal ID</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">55</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  "portalId": 1,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">56</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">57</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  // Your custom action definition ID</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">58</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  "actionDefinitionId": 2,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">59</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  },</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">60</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  "object": {</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">61</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  // The type of CRM object that is enrolled in the workflow</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">62</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  "objectType": "CONTACT",</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">63</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">64</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  // The ID of the CRM object that is enrolled in the workflow</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">65</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  "objectId": 4,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">66</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  },</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">67</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  "inputFields": {</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">68</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  // The property name for defined inputs</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">69</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  },</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">70</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  // A unique ID for this execution</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">71</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  "callbackId": "ap-123-456-7-8"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">72</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">}</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">73</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px; border-bottom: 0px solid transparent; top: 1394px;"></div><div class="CodeMirror-gutters" style="height: 1444px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></div></div></div></div></div>
<p>NODE16X, v3</p>
<div class="GutterContainer__Div-sc-19j3fkg-0 hbVaIR"><div class="UITabs__StyledUITabs-sc-1yikeha-3 bzPllJ private-tabs"><div class="UITabs__StyledWrapper-sc-1yikeha-2 fgVoJO private-tabs__list__wrapper base-font-size"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU private-tabs__list" data-content="true" role="tablist"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">Node.js<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a></div><span aria-hidden="true" class="HiddenMeasure__InnerMeasure-sc-1cmy50-0 gWDZTR" style="height: 0px;"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">Node.js<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a><button aria-hidden="true" data-dropdown-tabs="0" data-more-tabs="true" aria-haspopup="true" aria-labelledby="uiabstractdropdown-button-content-5" aria-owns="uiabstractdropdown-content-6" data-dropdown-open="false" aria-disabled="false" class="uiButton private-button private-button--transparent private-button--default UITabs__ExcessTabsDropdownButton-sc-1yikeha-4 OOhVh private-button__dropdown-opener uiDropdown__button private-tabs__excess-tabs-dropdown private-button--non-responsive private-button--non-link" data-button-use="transparent" tabindex="-1" type="button"><span class="uiDropdown__buttonContents private-dropdown__button__contents" id="uiabstractdropdown-button-content-5"><span class="private-dropdown__button-label uiDropdown__buttonLabel">More</span><span class="uiDropdown__buttonCaret private-dropdown__caret"></span></span></button></div></span></div><div role="tabpanel" class="UISection__ScrollWrapper-sc-14x4ixz-0 jRdYR is--module namespaced-hack-section UITabs__TabsPanel-sc-1yikeha-1 bVPTVe p-x-0 p-y-1 private-tabs__panel"><div class="Pre__PreWrapper-jlftju-1 cTEvvy"><div class="Pre__CopyButtonContainer-jlftju-0 iOvehH"><button aria-disabled="false" class="private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__low" data-icon-name="duplicate" style="color: rgb(255, 255, 255); font-size: 16px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 jfQUVB"></span></span></button></div><div class="react-codemirror m-bottom-4"><textarea readonly="" style="display: none;">const hubspot = require('@hubspot/api-client');

exports.main = async (event, callback) =&gt; {
  /*****
    How to use secrets
    Secrets are a way for you to save API keys or private apps and set them as a variable to use anywhere in your code
    Each secret needs to be defined like the example below
  *****/

  const hubspotClient = new hubspot.Client({
    apiKey: process.env.SECRET_NAME,
  });

  let phone;
  try {
    const ApiResponse = await hubspotClient.crm.contacts.basicApi.getById(
      event.object.objectId,
      ['phone']
    );
    phone = ApiResponse.body.properties.phone;
  } catch (err) {
    console.error(err);
    // We will automatically retry when the code fails because of a rate limiting error from the HubSpot API.
    throw err;
  }

  /*****
    How to use inputs
    Inputs are a way for you to take data from any actions in your workflow and use it in your code instead of having to call the HubSpot API to get that same data.
    Each input needs to be defined like the example below
  *****/

  const email = event.inputFields['email'];

  /*****
    How to use outputs
    Outputs are a way for you to take data from your code and use it in later workflows actions

    Use the callback function to return data that can be used in later actions.
    Data won't be returned until after the event loop is empty, so any code after this will still execute.
  *****/

  callback({
    outputFields: {
      email: email,
      phone: phone,
    },
  });
};

/* A sample event may look like:
{
  "origin": {
    // Your portal ID
    "portalId": 1,

    // Your custom action definition ID
    "actionDefinitionId": 2,
  },
  "object": {
    // The type of CRM object that is enrolled in the workflow
    "objectType": "CONTACT",

    // The ID of the CRM object that is enrolled in the workflow
    "objectId": 4,
  },
  "inputFields": {
    // The property name for defined inputs
  },
  // A unique ID for this execution
  "callbackId": "ap-123-456-7-8"
}
*/</textarea><div class="CodeMirror cm-s-hubspot-canvas-dark CodeMirror-wrap" translate="no" style="clip-path: inset(0px); font-family: &quot;Source Code Pro&quot;, Consolas, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; width: 100%; height: auto;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 33px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" readonly="" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="bottom: 0px; width: 18px; visibility: hidden;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; visibility: hidden;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 29px; margin-bottom: 0px; border-right-width: 50px; min-height: 1394px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>73</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">hubspot</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'@hubspot/api-client'</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">exports</span>.<span class="cm-property">main</span> <span class="cm-operator">=</span> <span class="cm-keyword">async</span> (<span class="cm-def">event</span>, <span class="cm-def">callback</span>) <span class="cm-operator">=&gt;</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/*****</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  How to use secrets</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Secrets are a way for you to save API keys or private apps and set them as a variable to use anywhere in your code</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Each secret needs to be defined like the example below</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  *****/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">hubspotClient</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">hubspot</span>.<span class="cm-property">Client</span>({</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">apiKey</span>: <span class="cm-variable">process</span>.<span class="cm-property">env</span>.<span class="cm-property">SECRET_NAME</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  });</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">phone</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">try</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">ApiResponse</span> <span class="cm-operator">=</span> <span class="cm-keyword">await</span> <span class="cm-variable-2">hubspotClient</span>.<span class="cm-property">crm</span>.<span class="cm-property">contacts</span>.<span class="cm-property">basicApi</span>.<span class="cm-property">getById</span>(</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable-2">event</span>.<span class="cm-property">object</span>.<span class="cm-property">objectId</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  [<span class="cm-string">'phone'</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  );</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable-2">phone</span> <span class="cm-operator">=</span> <span class="cm-variable-2">ApiResponse</span>.<span class="cm-property">body</span>.<span class="cm-property">properties</span>.<span class="cm-property">phone</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  } <span class="cm-keyword">catch</span> (<span class="cm-def">err</span>) {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">22</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">error</span>(<span class="cm-variable-2">err</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">23</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// We will automatically retry when the code fails because of a rate limiting error from the HubSpot API.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">24</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">throw</span> <span class="cm-variable-2">err</span>;</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">25</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">26</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">27</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/*****</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">28</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  How to use inputs</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">29</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Inputs are a way for you to take data from any actions in your workflow and use it in your code instead of having to call the HubSpot API to get that same data.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">30</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Each input needs to be defined like the example below</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">31</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  *****/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">32</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">33</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">email</span> <span class="cm-operator">=</span> <span class="cm-variable-2">event</span>.<span class="cm-property">inputFields</span>[<span class="cm-string">'email'</span>];</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">34</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">35</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">/*****</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">36</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  How to use outputs</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">37</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Outputs are a way for you to take data from your code and use it in later workflows actions</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">38</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">39</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Use the callback function to return data that can be used in later actions.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">40</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  Data won't be returned until after the event loop is empty, so any code after this will still execute.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">41</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  *****/</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">42</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">43</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">callback</span>({</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">44</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">outputFields</span>: {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">45</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">email</span>: <span class="cm-variable-2">email</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">46</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-property">phone</span>: <span class="cm-variable-2">phone</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">47</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  },</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">48</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  });</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">49</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">};</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">50</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">51</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">/* A sample event may look like:</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">52</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">{</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">53</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  "origin": {</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">54</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  // Your portal ID</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">55</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  "portalId": 1,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">56</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">57</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  // Your custom action definition ID</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">58</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  "actionDefinitionId": 2,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">59</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  },</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">60</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  "object": {</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">61</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  // The type of CRM object that is enrolled in the workflow</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">62</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  "objectType": "CONTACT",</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">63</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">64</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  // The ID of the CRM object that is enrolled in the workflow</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">65</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  "objectId": 4,</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">66</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  },</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">67</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  "inputFields": {</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">68</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment"> &nbsp;  // The property name for defined inputs</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">69</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  },</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">70</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  // A unique ID for this execution</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">71</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">  "callbackId": "ap-123-456-7-8"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">72</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">}</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">73</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">*/</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px; border-bottom: 0px solid transparent; top: 1394px;"></div><div class="CodeMirror-gutters" style="height: 1444px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></div></div></div></div></div>
<p>PYTHON (same for all versions)</p>
<div class="GutterContainer__Div-sc-19j3fkg-0 hbVaIR"><div class="UITabs__StyledUITabs-sc-1yikeha-3 bzPllJ private-tabs"><div class="UITabs__StyledWrapper-sc-1yikeha-2 fgVoJO private-tabs__list__wrapper base-font-size"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU private-tabs__list" data-content="true" role="tablist"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">Python<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a></div><span aria-hidden="true" class="HiddenMeasure__InnerMeasure-sc-1cmy50-0 gWDZTR" style="height: 0px;"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">Python<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a><button aria-hidden="true" data-dropdown-tabs="0" data-more-tabs="true" aria-haspopup="true" aria-labelledby="uiabstractdropdown-button-content-8" aria-owns="uiabstractdropdown-content-9" data-dropdown-open="false" aria-disabled="false" class="uiButton private-button private-button--transparent private-button--default UITabs__ExcessTabsDropdownButton-sc-1yikeha-4 OOhVh private-button__dropdown-opener uiDropdown__button private-tabs__excess-tabs-dropdown private-button--non-responsive private-button--non-link" data-button-use="transparent" tabindex="-1" type="button"><span class="uiDropdown__buttonContents private-dropdown__button__contents" id="uiabstractdropdown-button-content-8"><span class="private-dropdown__button-label uiDropdown__buttonLabel">More</span><span class="uiDropdown__buttonCaret private-dropdown__caret"></span></span></button></div></span></div><div role="tabpanel" class="UISection__ScrollWrapper-sc-14x4ixz-0 jRdYR is--module namespaced-hack-section UITabs__TabsPanel-sc-1yikeha-1 bVPTVe p-x-0 p-y-1 private-tabs__panel"><div class="Pre__PreWrapper-jlftju-1 cTEvvy"><div class="Pre__CopyButtonContainer-jlftju-0 iOvehH"><button aria-disabled="false" class="private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__low" data-icon-name="duplicate" style="color: rgb(255, 255, 255); font-size: 16px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 jfQUVB"></span></span></button></div><div class="react-codemirror m-bottom-4"><textarea readonly="" style="display: none;">import os
from hubspot import HubSpot
from hubspot.crm.contacts import ApiException

def main(event):

  # How to use secrets
  # Secrets are a way for you to save API keys or private apps and set them as a variable to use anywhere in your code
  # Each secret needs to be defined like the example below

  hubspot = HubSpot(access_token=os.getenv('SECRET_NAME'))

  phone = ''
  try:
    ApiResponse = hubspot.crm.contacts.basic_api.get_by_id(event.get('object').get('objectId'), properties=["phone"])
    phone = ApiResponse.properties.get('phone')
  except ApiException as e:
    print(e)
    # We will automatically retry when the code fails because of a rate limiting error from the HubSpot API.
    raise


  # How to use inputs
  # Inputs are a way for you to take data from any actions in your workflow and use it in your code instead of having to call the HubSpot API to get that same data.
  # Each input needs to be defined like the example below

  email = event.get('inputFields').get('email')


  # How to use outputs
  # Outputs are a way for you to take data from your code and use it in later workflows actions

  # Use the callback function to return data that can be used in later actions.
  # Data won't be returned until after the event loop is empty, so any code after this will still execute.

  return {
    "outputFields": {
      "email": email,
      "phone": phone
    }
  }


  # A sample event may look like:
  # {
  #   "origin": {
  #     # Your portal ID
  #     "portalId": 1,

  #     # Your custom action definition ID
  #     "actionDefinitionId": 2,
  #   },
  #   "object": {
  #     # The type of CRM object that is enrolled in the workflow
  #     "objectType": "CONTACT",

  #     # The ID of the CRM object that is enrolled in the workflow
  #     "objectId": 4,
  #   },
  #   "inputFields": {
  #     # The property name for defined inputs
  #   },
  #   # A unique ID for this execution
  #   "callbackId": "ap-123-456-7-8"
  # }</textarea><div class="CodeMirror cm-s-hubspot-canvas-dark CodeMirror-wrap" translate="no" style="clip-path: inset(0px); font-family: &quot;Source Code Pro&quot;, Consolas, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; width: 100%; height: auto;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 33px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" readonly="" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="bottom: 0px; width: 18px; visibility: hidden;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; visibility: hidden;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 29px; margin-bottom: 0px; border-right-width: 50px; min-height: 1268px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>65</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">import os</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">from hubspot import HubSpot</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">from hubspot.crm.contacts import ApiException</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">def main(event):</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # How to use secrets</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # Secrets are a way for you to save API keys or private apps and set them as a variable to use anywhere in your code</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # Each secret needs to be defined like the example below</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  hubspot = HubSpot(access_token=os.getenv('SECRET_NAME'))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  phone = ''</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  try:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ApiResponse = hubspot.crm.contacts.basic_api.get_by_id(event.get('object').get('objectId'), properties=["phone"])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  phone = ApiResponse.properties.get('phone')</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  except ApiException as e:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  print(e)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  # We will automatically retry when the code fails because of a rate limiting error from the HubSpot API.</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  raise</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">21</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">22</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">23</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # How to use inputs</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">24</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # Inputs are a way for you to take data from any actions in your workflow and use it in your code instead of having to call the HubSpot API to get that same data.</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">25</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # Each input needs to be defined like the example below</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">26</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">27</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  email = event.get('inputFields').get('email')</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">28</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">29</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">30</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # How to use outputs</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">31</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # Outputs are a way for you to take data from your code and use it in later workflows actions</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">32</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">33</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # Use the callback function to return data that can be used in later actions.</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">34</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # Data won't be returned until after the event loop is empty, so any code after this will still execute.</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">35</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">36</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  return {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">37</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  "outputFields": {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">38</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  "email": email,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">39</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;  "phone": phone</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">40</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">41</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">42</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">43</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">44</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # A sample event may look like:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">45</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">46</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; "origin": {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">47</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; &nbsp; # Your portal ID</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">48</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; &nbsp; "portalId": 1,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">49</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">50</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; &nbsp; # Your custom action definition ID</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">51</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; &nbsp; "actionDefinitionId": 2,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">52</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; },</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">53</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; "object": {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">54</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; &nbsp; # The type of CRM object that is enrolled in the workflow</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">55</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; &nbsp; "objectType": "CONTACT",</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">56</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">57</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; &nbsp; # The ID of the CRM object that is enrolled in the workflow</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">58</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; &nbsp; "objectId": 4,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">59</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; },</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">60</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; "inputFields": {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">61</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; &nbsp; # The property name for defined inputs</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">62</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; },</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">63</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; # A unique ID for this execution</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">64</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # &nbsp; "callbackId": "ap-123-456-7-8"</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">65</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  # }</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px; border-bottom: 0px solid transparent; top: 1268px;"></div><div class="CodeMirror-gutters" style="height: 1318px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></div></div></div></div></div>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="create-a-custom-code-action" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#create-a-custom-code-action" tabindex="0" aria-disabled="false">Create a custom code action</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>To add a custom code action to a workflow:</p>
<ul>
<li>In your HubSpot account, navigate to <strong>Automation</strong> &gt; <strong>Workflows</strong>.</li>
<li>Click the <strong>name</strong> of a workflow, or <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://knowledge.hubspot.com/workflows/create-workflows" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">create a new workflow<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a>.</li>
<li>Click the <strong>+</strong> <strong>plus</strong> <strong>icon</strong> to add a workflow action.</li>
<li>In the right panel, select <strong>Custom code</strong>.</li>
</ul>
<p><img alt="custom-code-action-select" data-lazy-src="https://www.hubspot.com/hubfs/Knowledge_Base_2021/custom-code-action-select.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
<ul>
<li>In the right panel, set up your action:
<ul>
<li>By default, custom code actions will use <strong>Node.js 16.x</strong>. If you’re in the Python beta and want to build your action with Python, click the <strong>Language</strong> dropdown menu, then select <strong>Python</strong>.</li>
<li>To add a new <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="#secret" tabindex="0" aria-disabled="false">secret</a>, such as a <a class="private-link uiLinkWithoutUnderline Link__StyledRouterLink-sc-1jdjaej-1 sGvXg uiLinkDark" href="/beta-docs/guides/apps/private-apps/overview" tabindex="0" aria-disabled="false">private app access token</a>, click <strong>Add secret</strong>. The app must include the respective scopes of any data that you're trying to pull from HubSpot, such as <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">contacts</code> or <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">forms</code>. Learn more about <a class="private-link uiLinkWithoutUnderline Link__StyledRouterLink-sc-1jdjaej-1 sGvXg uiLinkDark" href="/beta-docs/guides/apps/private-apps/overview" tabindex="0" aria-disabled="false">HubSpot private apps</a>.</li>
<li>In the dialog box, enter the <strong>Secret name</strong> and <strong>Secret value</strong>.</li>
<li>Click <strong>Save</strong>. You can now select this secret in future custom code actions.</li>
<li>To edit or delete existing secrets, click <strong>Manage secrets</strong>.</li>
</ul>
</li>
<li>To include properties in your custom code, click the <strong>Choose property</strong> dropdown menu, then select a <strong>property</strong>. You can use existing properties or <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://knowledge.hubspot.com/workflows/format-your-data-with-workflows" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">previously formatted property values<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a> in the workflow. After selecting your property, enter a Property <strong>name</strong> to use in your code. Learn how to <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="#add-hubspot-properties-to-your-custom-code" tabindex="0" aria-disabled="false">reference a property in your custom code</a>.</li>
<li>To add another property, click <strong>Add property</strong>. Each property can only be added once and must have a unique <em>Variable ID</em>. You can use up to 50 properties with your custom code.</li>
<li>To delete a property, click the <strong>delete</strong> icon.</li>
<li>In the <strong>code field</strong>, enter your JavaScript or Python.</li>
<li>To define data outputs that can be used as inputs later in the workflow, for example with a <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://knowledge.hubspot.com/workflows/choose-your-workflow-actions#copy-a-property-value" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false"><em>Copy property value</em><span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a> action:
<ul>
<li>Under <em>Data outputs</em>, click the <strong>Data type</strong> dropdown menu, and select a type of data.</li>
<li>In the <strong>Name</strong> field, enter a name for the data output.</li>
<li>To add multiple outputs, click <strong>Add output</strong>.</li>
</ul>
</li>
<li>Click <strong>Save</strong>.</li>
</ul>
<p><img alt="workflow-custom-code" data-lazy-src="https://www.hubspot.com/hubfs/Knowledge_Base_2021/workflow-custom-code.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
<div class="GutterContainer__Div-sc-19j3fkg-0 esGnOK"><div aria-atomic="true" aria-live="polite" class="alert private-alert alert-warning private-alert--warning Alert__StyledAlert-sc-1uex6ov-0 eZhkNm" role="alert"><div class="private-alert__inner"><div class="private-alert__body has--vertical-spacing"><p><strong>Please note:</strong> the code field will not display lint errors when using Python.</p></div></div></div></div>
<p>When building custom code actions, keep the following in mind:</p>
<ul>
<li>The <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">def main(event):</code> function is called when the code snippet action is executed.</li>
<li>The event argument is an object containing details for the workflow execution.</li>
<li>The <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">callback()</code> function is used to pass data back to the workflow. It should be called in the <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">exports.main</code> function. This can only be used with Node.js.</li>
</ul>
<p>The <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">event</code> object will contain the following data:</p>
<div class="Pre__PreWrapper-jlftju-1 cTEvvy"><div class="Pre__CopyButtonContainer-jlftju-0 iOvehH"><button aria-disabled="false" class="private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__low" data-icon-name="duplicate" style="color: rgb(255, 255, 255); font-size: 16px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 jfQUVB"></span></span></button></div><div class="react-codemirror m-bottom-4"><textarea readonly="" style="display: none;">//example payload
{
  "origin": {
    // Your portal ID
    "portalId": 1, // Your custom action definition ID
    "actionDefinitionId": 2
  },
  "object": {
    // The type of CRM object that is enrolled in the workflow
    "objectType": "CONTACT", // The ID of the CRM object that is enrolled in the workflow
    "objectId": 4
  },
  // A unique ID for this execution.
  "callbackId": "ap-123-456-7-8"
}</textarea><div class="CodeMirror cm-s-hubspot-canvas-dark CodeMirror-wrap" translate="no" style="clip-path: inset(0px); font-family: &quot;Source Code Pro&quot;, Consolas, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; width: 100%; height: auto;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 33px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" readonly="" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="bottom: 0px; width: 18px; visibility: hidden;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; visibility: hidden;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 29px; margin-bottom: 0px; border-right-width: 50px; min-height: 278px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>15</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//example payload</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"origin"</span>: {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// Your portal ID</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"portalId"</span>: <span class="cm-number">1</span>, <span class="cm-comment">// Your custom action definition ID</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"actionDefinitionId"</span>: <span class="cm-number">2</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"object"</span>: {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">// The type of CRM object that is enrolled in the workflow</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"objectType"</span>: <span class="cm-string">"CONTACT"</span>, <span class="cm-comment">// The ID of the CRM object that is enrolled in the workflow</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-string cm-property">"objectId"</span>: <span class="cm-number">4</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">// A unique ID for this execution.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-string cm-property">"callbackId"</span>: <span class="cm-string">"ap-123-456-7-8"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px; border-bottom: 0px solid transparent; top: 278px;"></div><div class="CodeMirror-gutters" style="height: 328px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></div></div>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="test-the-action" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#test-the-action" tabindex="0" aria-disabled="false">Test the action</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>When adding a custom code action to a workflow, you can test the action to ensure that your code runs as expected before turning the workflow on.</p>
<p>When testing a custom code action, you'll start by selecting a record to test the code with, then run the code. This test will run <u>only</u> the code in your custom action, not any of the other actions in the workflow. When the code is finished running, you'll be able to view the code outputs and the log of your test.</p>
<div class="GutterContainer__Div-sc-19j3fkg-0 esGnOK"><div aria-atomic="true" aria-live="polite" class="alert private-alert alert-warning private-alert--warning Alert__StyledAlert-sc-1uex6ov-0 eZhkNm" role="alert"><div class="private-alert__inner"><div class="private-alert__body has--vertical-spacing"><p><strong>Please note:</strong> when testing your custom code, the code will run and any changes will apply to the selected test record. It's recommended to create a dedicated test record if you want to avoid updating your live records.</p></div></div></div></div>
<p>To test a custom code action:</p>
<ul>
<li>
<p>In the workflow timeline, click the <strong>custom code action</strong>.</p>
</li>
<li>
<p>At the bottom of the right sidebar, click <strong>Test action</strong> to expand the testing section.</p>
<p><img alt="workflow-custom-code-test-expand" data-lazy-src="https://www.hubspot.com/hubfs/Knowledge_Base_2021/workflow-custom-code-test-expand.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
</li>
<li>
<p>Select a record to test your code with by clicking the <strong>[Object]</strong> dropdown menu, then selecting a <strong>record</strong>.</p>
<p><img alt="workflow-custom-code-action-test2" data-lazy-src="https://www.hubspot.com/hubfs/Knowledge_Base_2021/workflow-custom-code-action-test2.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
</li>
<li>
<p>If you're using <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://developers.hubspot.com/workflows/format-your-data-with-workflows" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">previously formatted property values<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a> in the workflow, enter a <strong>test value</strong> for the formatted data.</p>
</li>
</ul>
<p><img alt="" data-lazy-src="https://www.hubspot.com/hubfs/image-png-Oct-22-2021-04-16-00-53-AM.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
<ul>
<li>
<p>To run the code, click <strong>Test</strong>.</p>
</li>
<li>
<p>In the dialog box, confirm that you want to test your code against the selected record by clicking <strong>Test</strong>.</p>
</li>
<li>
<p>Once your code is done running, the sidebar will display the results of your test:</p>
<ul>
<li>
<p><strong>Status:</strong> the success or failure status of your custom code action.</p>
</li>
<li>
<p><strong>Data outputs:</strong> the values that resulted for your defined data outputs. An alert will display next to any outputs that the code generated which weren't defined either in the <em>Data outputs</em> section or in the code editor. You'll need to add those outputs in order to use them later in the workflow.</p>
</li>
<li>
<p><strong>Logs:</strong> information about the test itself, such as how much memory the action took to execute and the total runtime.</p>
<p><img alt="workflow-custom-code-action-test0results0" data-lazy-src="https://www.hubspot.com/hubfs/Knowledge_Base_2021/workflow-custom-code-action-test0results0.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
</li>
</ul>
</li>
<li>
<p>To update your custom code action, click <strong>Create</strong> <strong>action</strong> to expand the action editor. Continue to update and test your code as needed.</p>
</li>
<li>
<p>When you're done testing the action, click <strong>Save</strong> to save your changes.</p>
</li>
</ul>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="secrets" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#secrets" tabindex="0" aria-disabled="false">Secrets</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>There are times you will want your code to reference something that shouldn't be widely shared. Most often, this is a means of authentication, like a <a class="private-link uiLinkWithoutUnderline Link__StyledRouterLink-sc-1jdjaej-1 sGvXg uiLinkDark" href="/beta-docs/guides/apps/private-apps/overview" tabindex="0" aria-disabled="false">private app access token</a>. You can manage the secrets your function has access to directly in the workflow action definition. When using multiple secrets within a custom code, the total length of all secret values must <u>not</u> exceed 1000 characters.</p>
<p><img alt="workflow-custom-code-secrets" data-lazy-src="https://www.hubspot.com/hubfs/Knowledge_Base_2021/workflow-custom-code-secrets.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
<p>Once added, the secrets will be available as environment variables, which you can access in the custom code, as shown below:</p>
<div class="GutterContainer__Div-sc-19j3fkg-0 hbVaIR"><div class="UITabs__StyledUITabs-sc-1yikeha-3 bzPllJ private-tabs"><div class="UITabs__StyledWrapper-sc-1yikeha-2 fgVoJO private-tabs__list__wrapper base-font-size"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU private-tabs__list" data-content="true" role="tablist"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">JavaScript<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a></div><span aria-hidden="true" class="HiddenMeasure__InnerMeasure-sc-1cmy50-0 gWDZTR" style="height: 0px;"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">JavaScript<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a><button aria-hidden="true" data-dropdown-tabs="0" data-more-tabs="true" aria-haspopup="true" aria-labelledby="uiabstractdropdown-button-content-11" aria-owns="uiabstractdropdown-content-12" data-dropdown-open="false" aria-disabled="false" class="uiButton private-button private-button--transparent private-button--default UITabs__ExcessTabsDropdownButton-sc-1yikeha-4 OOhVh private-button__dropdown-opener uiDropdown__button private-tabs__excess-tabs-dropdown private-button--non-responsive private-button--non-link" data-button-use="transparent" tabindex="-1" type="button"><span class="uiDropdown__buttonContents private-dropdown__button__contents" id="uiabstractdropdown-button-content-11"><span class="private-dropdown__button-label uiDropdown__buttonLabel">More</span><span class="uiDropdown__buttonCaret private-dropdown__caret"></span></span></button></div></span></div><div role="tabpanel" class="UISection__ScrollWrapper-sc-14x4ixz-0 jRdYR is--module namespaced-hack-section UITabs__TabsPanel-sc-1yikeha-1 bVPTVe p-x-0 p-y-1 private-tabs__panel"><div class="Pre__PreWrapper-jlftju-1 cTEvvy"><div class="Pre__CopyButtonContainer-jlftju-0 iOvehH"><button aria-disabled="false" class="private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__low" data-icon-name="duplicate" style="color: rgb(255, 255, 255); font-size: 16px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 jfQUVB"></span></span></button></div><div class="react-codemirror m-bottom-4"><textarea readonly="" style="display: none;">const hubspot = require('@hubspot/api-client');
exports.main = (event, callback) =&gt; {
  return callback(processEvent(event));
};
function processEvent(event) {
  // secrets can be accessed via environment variables
  const hubspotClient = new hubspot.Client({
    accessToken: process.env.secretName,
  });
  hubspotClient.crm.contacts.basicApi
    .getById(event['object']['objectId'], ['email', 'phone'])
    .then((results) =&gt; {
      let email = results.body['properties']['email'];
      let phone = results.body['properties']['phone'];
      // ...
    })
    .catch((err) =&gt; {
      console.error(err);
    });
}</textarea><div class="CodeMirror cm-s-hubspot-canvas-dark CodeMirror-wrap" translate="no" style="clip-path: inset(0px); font-family: &quot;Source Code Pro&quot;, Consolas, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; width: 100%; height: auto;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 33px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" readonly="" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="bottom: 0px; width: 18px; visibility: hidden;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; visibility: hidden;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 29px; margin-bottom: 0px; border-right-width: 50px; min-height: 368px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>20</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">hubspot</span> <span class="cm-operator">=</span> <span class="cm-variable">require</span>(<span class="cm-string">'@hubspot/api-client'</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">exports</span>.<span class="cm-property">main</span> <span class="cm-operator">=</span> (<span class="cm-def">event</span>, <span class="cm-def">callback</span>) <span class="cm-operator">=&gt;</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">return</span> <span class="cm-variable-2">callback</span>(<span class="cm-variable">processEvent</span>(<span class="cm-variable-2">event</span>));</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">};</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">function</span> <span class="cm-def">processEvent</span>(<span class="cm-def">event</span>) {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">// secrets can be accessed via environment variables</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">7</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">const</span> <span class="cm-def">hubspotClient</span> <span class="cm-operator">=</span> <span class="cm-keyword">new</span> <span class="cm-variable">hubspot</span>.<span class="cm-property">Client</span>({</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">8</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">accessToken</span>: <span class="cm-variable">process</span>.<span class="cm-property">env</span>.<span class="cm-property">secretName</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">9</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  });</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">10</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable-2">hubspotClient</span>.<span class="cm-property">crm</span>.<span class="cm-property">contacts</span>.<span class="cm-property">basicApi</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">11</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  .<span class="cm-property">getById</span>(<span class="cm-variable-2">event</span>[<span class="cm-string">'object'</span>][<span class="cm-string">'objectId'</span>], [<span class="cm-string">'email'</span>, <span class="cm-string">'phone'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">12</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  .<span class="cm-property">then</span>((<span class="cm-def">results</span>) <span class="cm-operator">=&gt;</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">13</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">email</span> <span class="cm-operator">=</span> <span class="cm-variable-2">results</span>.<span class="cm-property">body</span>[<span class="cm-string">'properties'</span>][<span class="cm-string">'email'</span>];</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">14</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-keyword">let</span> <span class="cm-def">phone</span> <span class="cm-operator">=</span> <span class="cm-variable-2">results</span>.<span class="cm-property">body</span>[<span class="cm-string">'properties'</span>][<span class="cm-string">'phone'</span>];</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">15</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-comment">// ...</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">16</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  })</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">17</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  .<span class="cm-property">catch</span>((<span class="cm-def">err</span>) <span class="cm-operator">=&gt;</span> {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">18</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;<span class="cm-variable">console</span>.<span class="cm-property">error</span>(<span class="cm-variable-2">err</span>);</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">19</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  });</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">20</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px; border-bottom: 0px solid transparent; top: 368px;"></div><div class="CodeMirror-gutters" style="height: 418px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></div></div></div></div></div>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="add-hubspot-properties-to-your-custom-code" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#add-hubspot-properties-to-your-custom-code" tabindex="0" aria-disabled="false">Add HubSpot properties to your custom code</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>At times, you may need to fetch object properties in your custom code action. Rather than using HubSpot's APIs, you can add these properties directly in the workflow action definition. Add properties and set property names to reference properties in your code. You can add up to 50 properties in each custom code action.</p>
<p><img alt="" data-lazy-src="https://www.hubspot.com/hubfs/image-png-Oct-21-2021-07-28-35-75-AM.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
<p>Once added, the property can be referenced in the custom code.</p>
<div class="GutterContainer__Div-sc-19j3fkg-0 hbVaIR"><div class="UITabs__StyledUITabs-sc-1yikeha-3 bzPllJ private-tabs"><div class="UITabs__StyledWrapper-sc-1yikeha-2 fgVoJO private-tabs__list__wrapper base-font-size"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU private-tabs__list" data-content="true" role="tablist"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">JavaScript<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a><a data-tab-id="1" data-tab-selected="false" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 gxKbGQ private-tab private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">Python<span class="UITab__TabIndicator-dj00jx-0 hGgXrc private-tab__indicator"></span></a></div><span aria-hidden="true" class="HiddenMeasure__InnerMeasure-sc-1cmy50-0 gWDZTR" style="height: 0px;"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">JavaScript<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a><a data-tab-id="1" data-tab-selected="false" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 gxKbGQ private-tab private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">Python<span class="UITab__TabIndicator-dj00jx-0 hGgXrc private-tab__indicator"></span></a><button aria-hidden="true" data-dropdown-tabs="0" data-more-tabs="true" aria-haspopup="true" aria-labelledby="uiabstractdropdown-button-content-14" aria-owns="uiabstractdropdown-content-15" data-dropdown-open="false" aria-disabled="false" class="uiButton private-button private-button--transparent private-button--default UITabs__ExcessTabsDropdownButton-sc-1yikeha-4 OOhVh private-button__dropdown-opener uiDropdown__button private-tabs__excess-tabs-dropdown private-button--non-responsive private-button--non-link" data-button-use="transparent" tabindex="-1" type="button"><span class="uiDropdown__buttonContents private-dropdown__button__contents" id="uiabstractdropdown-button-content-14"><span class="private-dropdown__button-label uiDropdown__buttonLabel">More</span><span class="uiDropdown__buttonCaret private-dropdown__caret"></span></span></button></div></span></div><div role="tabpanel" class="UISection__ScrollWrapper-sc-14x4ixz-0 jRdYR is--module namespaced-hack-section UITabs__TabsPanel-sc-1yikeha-1 bVPTVe p-x-0 p-y-1 private-tabs__panel"><div class="Pre__PreWrapper-jlftju-1 cTEvvy"><div class="Pre__CopyButtonContainer-jlftju-0 iOvehH"><button aria-disabled="false" class="private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__low" data-icon-name="duplicate" style="color: rgb(255, 255, 255); font-size: 16px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 jfQUVB"></span></span></button></div><div class="react-codemirror m-bottom-4"><textarea readonly="" style="display: none;">const email = event.inputFields['email'];</textarea><div class="CodeMirror cm-s-hubspot-canvas-dark CodeMirror-wrap" translate="no" style="clip-path: inset(0px); font-family: &quot;Source Code Pro&quot;, Consolas, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; width: 100%; height: auto;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 4px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" readonly="" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; visibility: hidden;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; visibility: hidden;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 50px; min-height: 26px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">const</span> <span class="cm-def">email</span> <span class="cm-operator">=</span> <span class="cm-variable">event</span>.<span class="cm-property">inputFields</span>[<span class="cm-string">'email'</span>];</span></pre></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px; border-bottom: 0px solid transparent; top: 26px;"></div><div class="CodeMirror-gutters" style="display: none; height: 76px;"></div></div></div></div></div></div></div></div>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="logging" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#logging" tabindex="0" aria-disabled="false">Logging</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>An important tool for developers is ability to print outputs from their code. It helps you debug issues and provide better support for your end users. To see the output of the logs, you can find them in the "History" tab of the workflow.</p>
<p><img alt="custom_code_logs" data-lazy-src="https://www.hubspot.com/hubfs/custom_code_logs.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="how-to-define-outputs" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#how-to-define-outputs" tabindex="0" aria-disabled="false">How to Define Outputs</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>In the function, define the output fields you want to use later in the workflow. Then, in the right sidebar, select the data output type (e.g., number, string, boolean, datetime, enum, date phone number) and input the field you want to output.</p>
<p>The output fields should be part of a json object formatted accordingly, depending on the language used:</p>
<div class="GutterContainer__Div-sc-19j3fkg-0 hbVaIR"><div class="UITabs__StyledUITabs-sc-1yikeha-3 bzPllJ private-tabs"><div class="UITabs__StyledWrapper-sc-1yikeha-2 fgVoJO private-tabs__list__wrapper base-font-size"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU private-tabs__list" data-content="true" role="tablist"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">JavaScript<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a><a data-tab-id="1" data-tab-selected="false" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 gxKbGQ private-tab private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">Python<span class="UITab__TabIndicator-dj00jx-0 hGgXrc private-tab__indicator"></span></a></div><span aria-hidden="true" class="HiddenMeasure__InnerMeasure-sc-1cmy50-0 gWDZTR" style="height: 0px;"><div class="UITabs__StyledList-sc-1yikeha-0 cGmvmU"><a aria-selected="true" data-tab-id="0" data-tab-selected="true" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 fMszOi private-tab private-tab--active private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">JavaScript<span class="UITab__TabIndicator-dj00jx-0 cRUQBv private-tab__indicator"></span></a><a data-tab-id="1" data-tab-selected="false" class="private-link uiLinkWithoutUnderline UITab__StyledLink-dj00jx-2 gxKbGQ private-tab private-link--unstyled" role="tab" tabindex="0" aria-disabled="false">Python<span class="UITab__TabIndicator-dj00jx-0 hGgXrc private-tab__indicator"></span></a><button aria-hidden="true" data-dropdown-tabs="0" data-more-tabs="true" aria-haspopup="true" aria-labelledby="uiabstractdropdown-button-content-17" aria-owns="uiabstractdropdown-content-18" data-dropdown-open="false" aria-disabled="false" class="uiButton private-button private-button--transparent private-button--default UITabs__ExcessTabsDropdownButton-sc-1yikeha-4 OOhVh private-button__dropdown-opener uiDropdown__button private-tabs__excess-tabs-dropdown private-button--non-responsive private-button--non-link" data-button-use="transparent" tabindex="-1" type="button"><span class="uiDropdown__buttonContents private-dropdown__button__contents" id="uiabstractdropdown-button-content-17"><span class="private-dropdown__button-label uiDropdown__buttonLabel">More</span><span class="uiDropdown__buttonCaret private-dropdown__caret"></span></span></button></div></span></div><div role="tabpanel" class="UISection__ScrollWrapper-sc-14x4ixz-0 jRdYR is--module namespaced-hack-section UITabs__TabsPanel-sc-1yikeha-1 bVPTVe p-x-0 p-y-1 private-tabs__panel"><div class="Pre__PreWrapper-jlftju-1 cTEvvy"><div class="Pre__CopyButtonContainer-jlftju-0 iOvehH"><button aria-disabled="false" class="private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__low" data-icon-name="duplicate" style="color: rgb(255, 255, 255); font-size: 16px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 jfQUVB"></span></span></button></div><div class="react-codemirror m-bottom-4"><textarea readonly="" style="display: none;">callback({
  outputFields: {
    email: email,
    phone: phone,
  },
});</textarea><div class="CodeMirror cm-s-hubspot-canvas-dark CodeMirror-wrap" translate="no" style="clip-path: inset(0px); font-family: &quot;Source Code Pro&quot;, Consolas, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; width: 100%; height: auto;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 33px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" readonly="" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; visibility: hidden;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; visibility: hidden;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 29px; margin-bottom: 0px; border-right-width: 50px; min-height: 116px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>6</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation" style=""><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">callback</span>({</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-property">outputFields</span>: {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">email</span>: <span class="cm-variable">email</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-property">phone</span>: <span class="cm-variable">phone</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">5</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  },</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">6</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">});</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px; border-bottom: 0px solid transparent; top: 116px;"></div><div class="CodeMirror-gutters" style="height: 166px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></div></div></div></div></div>
<p><img alt="custom-code-output" data-lazy-src="https://www.hubspot.com/hubfs/Knowledge_Base_2021/custom-code-output.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
<p>You can then use the output from your code action as in input to the <em>Copy property value</em> action. This removes the need to make another API call to store the value as a property on your object.</p>
<p>Do take note of the following when defining your output:</p>
<ul>
<li>If your data output type is in string format, the limit for string output values is 65,000 characters. Exceeding this limit will result in an <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">OUTPUT_VALUES_TOO_LARGE</code> error.</li>
<li>If you're using the <em>Copy property value</em> action, please also take note of <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://knowledge.hubspot.com/workflows/compatible-source-and-target-properties-for-copying-property-values-in-workflows" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">compatible source and target properties<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a>.</li>
<li>Do also note that if you're copying an output to a datetime property, the output will need to be in <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://developers.hubspot.com/docs/faq/how-should-timestamps-be-formatted-for-hubspots-apis" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">UNIX millisecond format<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a>.</li>
</ul>
<p><img alt="custom_code_actions_output_usage" data-lazy-src="https://www.hubspot.com/hubfs/custom_code_actions_output_usage.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="limitations" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#limitations" tabindex="0" aria-disabled="false">Limitations</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>Custom code actions must finish running within 20 seconds and can only use up to 128 MB of memory. Exceeding either of these limits will result in an error.</p>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="retries" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#retries" tabindex="0" aria-disabled="false">Retries</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>You may need to fetch object properties using the HubSpot API or to call other HubSpot API endpoints in your custom code action. Like any other API call, you'll still need to comply with <a class="private-link uiLinkWithoutUnderline Link__StyledRouterLink-sc-1jdjaej-1 sGvXg uiLinkDark" href="/beta-docs/guides/apps/api-usage/usage-details" tabindex="0" aria-disabled="false">HubSpot API rate limits</a>.</p>
<ul>
<li>If you're using Node.js and encounter a rate limiting error but you want HubSpot to retry your call, you'll need to throw the error in the <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">catch</code> block of your custom code action.</li>
</ul>
<p><img alt="" data-lazy-src="https://www.hubspot.com/hubfs/image-png-Dec-10-2021-11-39-45-62-AM.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
<ul>
<li>If you're using Python and encounter a rate limiting error but you want HubSpot to retry your call, you'll need to raise the error in the <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">except</code> block of your custom code action.</li>
</ul>
<p><img alt="" data-lazy-src="https://www.hubspot.com/hubfs/image-png-Dec-10-2021-11-41-06-77-AM.png" class="Image__Img-sc-1g6lyif-0 fsPQnm"></p>
<div class="GutterContainer__Div-sc-19j3fkg-0 esGnOK"><div aria-atomic="true" aria-live="polite" class="alert private-alert alert-warning private-alert--warning Alert__StyledAlert-sc-1uex6ov-0 eZhkNm" role="alert"><div class="private-alert__inner"><div class="private-alert__body has--vertical-spacing"><p><strong>Please note:</strong> if the call fails due to a rate limiting error, or a 429 or 5XX error from <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://www.npmjs.com/package/axios" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">axios<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a> or <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://www.npmjs.com/package/@hubspot/api-client" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">@hubspot/api-client<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a>, HubSpot will reattempt to execute your action for up to three days, starting one minute after failure. Subsequent failures will be retried at increasing intervals, with a maximum gap of eight hours between tries.</p></div></div></div></div>
<div class="MdxHeader__HeaderContainer-sc-1yeqcak-1 gxPvek"><h2 id="caveats" class="Heading-sc-6n9fru-0 H2-sc-1a3ezu8-0 MdxH2__StyledH2-sc-7q5bju-0 bHDrvq align-center" aria-level="2"><a class="private-link uiLinkWithoutUnderline private-link--unstyled" href="#caveats" tabindex="0" aria-disabled="false">Caveats</a><span class="MdxHeader__AnchorContainer-sc-1yeqcak-0 jOUVtb"><button aria-disabled="false" class="display-flex private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__high" data-icon-name="link" style="color: rgb(203, 214, 226); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 kucFzS"></span></span></button></span></h2></div>
<p>If you're using Node.js for your custom code, take note of the following caveats:</p>
<ul>
<li><strong>Generating random numbers:</strong> it's common to use <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">Math.random<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a> to generate random numbers but users may see the same numbers generated across different executions. This is because Math.random is seeded by the current time. Since HubSpot may enroll many objects into a workflow at the same time and clear the state on every execution, different executions end up seeding Math.random in the same way. Instead, you can use of <a class="private-link uiLinkWithoutUnderline Link__StyledLink-sc-1jdjaej-0 jkUwKq uiLinkDark" href="https://www.npmjs.com/package/random-number-csprng" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">random-number-csprng 1.0.2<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a> library which guarantees cryptographically secure pseudo-random number generation.</li>
<li><strong>Variable re-use:</strong> to save memory, any variables declared outside the <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">exports.main</code> function may be re-used for future executions of the custom code action. This is useful when connecting to external services like a database, but any logic or information that needs to be unique to each execution of the custom code action should be inside the <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">exports.main</code> function.</li>
</ul>
<p>If you're using Python for your custom code, take note of the following caveats:</p>
<ul>
<li><strong>Variable re-use:</strong> similar to the above, any variables declared outside the <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">def main</code> function may be re-used for future executions of the custom code action.
<ul>
<li>If you've declared a variable outside the <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">def main</code> function but <u>do not</u> plan on altering it, you can reference the variable directly.</li>
<li>If you plan on altering a variable, you can declare the variable within the <code class="Code__StyledCode-sc-1ugchg-0 lptIIS private-code">def main</code> function with a global keyword before referencing it.</li>
</ul>
</li>
</ul>
<div class="Pre__PreWrapper-jlftju-1 cTEvvy"><div class="Pre__CopyButtonContainer-jlftju-0 iOvehH"><button aria-disabled="false" class="private-button--unstyled" data-button-use="unstyled" tabindex="0" type="button"><span class="private-icon private-icon__low" data-icon-name="duplicate" style="color: rgb(255, 255, 255); font-size: 16px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 jfQUVB"></span></span></button></div><div class="react-codemirror m-bottom-4"><textarea readonly="" style="display: none;">a = 1
def main(event):
  global a
  a += 1</textarea><div class="CodeMirror cm-s-hubspot-canvas-dark CodeMirror-wrap" translate="no" style="clip-path: inset(0px); font-family: &quot;Source Code Pro&quot;, Consolas, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; width: 100%; height: auto;"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 33px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" readonly="" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; min-height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" tabindex="-1" cm-not-content="true" style="width: 18px; visibility: hidden;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" tabindex="-1" cm-not-content="true" style="height: 18px; visibility: hidden;"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 29px; margin-bottom: 0px; border-right-width: 50px; min-height: 80px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre class="CodeMirror-line-like"><span>xxxxxxxxxx</span></pre><div class="CodeMirror-linenumber CodeMirror-gutter-elt"><div>4</div></div></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 18px;">&nbsp;</div></div><div class="CodeMirror-code" role="presentation"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">1</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">a = 1</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">2</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">def main(event):</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">3</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  global a</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" aria-hidden="true" style="left: -29px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 21px;">4</div></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">  a += 1</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 50px; width: 1px; border-bottom: 0px solid transparent; top: 80px;"></div><div class="CodeMirror-gutters" style="height: 130px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 29px;"></div></div></div></div></div></div></div></article><aside data-test-id="feedback-form" data-page-id="35877614093" data-title="HubSpot Developer Documentation" aria-label="Share your feedback" class="DocFeedback__Aside-plq2h1-1 fbVwNb"><h3 class="HDSText__StyledHDSText-h9kjex-0 dpCLFk"><i18n-string data-locale-at-render="en-US" data-key="developer-docs-ui.docFeedback.header">Share your feedback</i18n-string></h3><form class="private-form m-bottom-4"><div class="private-form__set"><div class="private-form__control-wrapper"><div class="UIFormControl__LabelWrapper-uo18rv-1 gXHfX private-form__label-wrapper"><label for="UIFormControl-19" id="UIFormControl-label-20" class="private-form__label UIFormControl__InlineFormLabel-uo18rv-0 YAgug private-form__label--required"><span class="UIFormControl__StyledSpan-uo18rv-2 StfHe"><i18n-string data-locale-at-render="en-US" data-key="developer-docs-ui.docFeedback.wasHelpful.label">Was this article helpful?</i18n-string></span></label></div><div class="private-form__input-wrapper"><div required="" aria-required="true" id="UIFormControl-19"><div class="ToggleInputWrapper__ToggleInputWrapperDiv-sc-1saskt1-0 ckyENq UIRadioInput__Radio-n49ax2-0 bsIPHA private-radio private-checkbox"><label class="ToggleInputWrapper__CheckboxLabel-sc-1saskt1-1 bezwBB"><span class="ToggleInputWrapper__CheckboxInnerSpan-sc-1saskt1-2 jxgIPv"><input aria-labelledby="UIFormControl-label-20 radio-content-28" class="UIRadioInput__PrivateRadioInput-n49ax2-3 iFqDkx sr-only private-checkbox__input" name="page-feedback__sentiment" type="radio" value=""><span class="UIRadioInput__PrivateRadioIndicator-n49ax2-2 kZTgYr private-checkbox__indicator private-radio__indicator" data-indicator="true" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="10" cy="10" r="10" class="UIRadioInput__PrivateRadioCircle-n49ax2-4 ja-dYuD private-radio__circle" stroke="currentColor" stroke-width="1.5"></circle><circle class="UIRadioInput__PrivateRadioDot-n49ax2-1 iYIXhO private-radio__dot" cx="10" cy="10" r="5"></circle></g></svg></span><span class="ToggleInputWrapper__CheckboxInnerTextSpan-sc-1saskt1-3 iqCFFC private-checkbox__text" id="radio-content-28"><i18n-string data-locale-at-render="en-US" data-key="developer-docs-ui.docFeedback.wasHelpful.positive">Yes</i18n-string></span></span></label></div><div class="ToggleInputWrapper__ToggleInputWrapperDiv-sc-1saskt1-0 ckyENq UIRadioInput__Radio-n49ax2-0 bsIPHA private-radio private-checkbox"><label class="ToggleInputWrapper__CheckboxLabel-sc-1saskt1-1 bezwBB"><span class="ToggleInputWrapper__CheckboxInnerSpan-sc-1saskt1-2 jxgIPv"><input aria-labelledby="UIFormControl-label-20 radio-content-30" class="UIRadioInput__PrivateRadioInput-n49ax2-3 iFqDkx sr-only private-checkbox__input" name="page-feedback__sentiment" type="radio" value=""><span class="UIRadioInput__PrivateRadioIndicator-n49ax2-2 kZTgYr private-checkbox__indicator private-radio__indicator" data-indicator="true" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><circle cx="10" cy="10" r="10" class="UIRadioInput__PrivateRadioCircle-n49ax2-4 ja-dYuD private-radio__circle" stroke="currentColor" stroke-width="1.5"></circle><circle class="UIRadioInput__PrivateRadioDot-n49ax2-1 iYIXhO private-radio__dot" cx="10" cy="10" r="5"></circle></g></svg></span><span class="ToggleInputWrapper__CheckboxInnerTextSpan-sc-1saskt1-3 iqCFFC private-checkbox__text" id="radio-content-30"><i18n-string data-locale-at-render="en-US" data-key="developer-docs-ui.docFeedback.wasHelpful.negative">No</i18n-string></span></span></label></div></div></div><div class="private-form__meta"><div class="private-form__messages"></div></div></div></div></form><small><span>This form is used for documentation feedback only. Learn how to <a class="private-link uiLinkWithoutUnderline uiLinkDark" href="https://knowledge.hubspot.com/account/get-help-with-hubspot" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">get help with HubSpot<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a></span></small></aside><section data-test-id="docs-public-footer" class="Footer__StyledFooter-aouf67-0 hQXqow"><div class="Footer__LogoWrapper-aouf67-6 lnqmc"><a class="private-link uiLinkWithoutUnderline uiLinkDark" href="/beta-docs/" tabindex="0" aria-disabled="false"><svg width="160" height="26" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160 26"><title>HubSpot Developer Documentation home</title><path fill="#33475b" d="M104.342 21V7h5.74c1.027 0 1.953.173 2.78.52.84.333 1.56.813 2.16 1.44a6.097 6.097 0 0 1 1.4 2.2c.32.853.48 1.8.48 2.84 0 1.027-.16 1.973-.48 2.84a6.438 6.438 0 0 1-1.38 2.22 6.394 6.394 0 0 1-2.16 1.44c-.84.333-1.773.5-2.8.5h-5.74Zm3-2.18-.32-.52h2.96c.6 0 1.14-.1 1.62-.3.48-.213.887-.5 1.22-.86.347-.373.607-.827.78-1.36.173-.533.26-1.127.26-1.78a5.56 5.56 0 0 0-.26-1.76 3.595 3.595 0 0 0-.78-1.36 3.323 3.323 0 0 0-1.22-.86 3.948 3.948 0 0 0-1.62-.32h-3.02l.38-.48v9.6Zm18.493 2.38c-1.04 0-1.993-.18-2.86-.54a7.15 7.15 0 0 1-2.28-1.5 6.825 6.825 0 0 1-1.48-2.3 7.96 7.96 0 0 1-.52-2.9c0-1.053.174-2.02.52-2.9.347-.88.84-1.64 1.48-2.28a6.988 6.988 0 0 1 2.28-1.52c.867-.36 1.814-.54 2.84-.54 1.04 0 1.987.18 2.84.54a6.75 6.75 0 0 1 2.26 1.52 6.654 6.654 0 0 1 1.5 2.3c.347.88.52 1.84.52 2.88 0 1.04-.173 2-.52 2.88a6.654 6.654 0 0 1-1.5 2.3 6.75 6.75 0 0 1-2.26 1.52c-.853.36-1.793.54-2.82.54Zm-.02-2.84c.6 0 1.147-.107 1.64-.32.494-.227.92-.533 1.28-.92.36-.4.64-.867.84-1.4.214-.533.32-1.12.32-1.76 0-.64-.106-1.227-.32-1.76-.2-.533-.48-.993-.84-1.38-.36-.4-.786-.707-1.28-.92a3.88 3.88 0 0 0-1.64-.34c-.586 0-1.126.113-1.62.34-.493.213-.926.52-1.3.92a3.97 3.97 0 0 0-.86 1.38 5.314 5.314 0 0 0-.28 1.76c0 .64.094 1.227.28 1.76.2.533.487 1 .86 1.4.374.387.807.693 1.3.92.494.213 1.034.32 1.62.32Zm15.976 2.84c-1.027 0-1.974-.173-2.84-.52-.854-.36-1.6-.86-2.24-1.5a6.963 6.963 0 0 1-1.46-2.3c-.347-.893-.52-1.867-.52-2.92 0-1.027.18-1.973.54-2.84.36-.88.866-1.64 1.52-2.28a6.919 6.919 0 0 1 2.3-1.52 7.48 7.48 0 0 1 2.86-.54c.666 0 1.32.093 1.96.28a6.133 6.133 0 0 1 1.78.78c.546.347 1.013.76 1.4 1.24l-1.88 2.08a5.652 5.652 0 0 0-.98-.82 4.03 4.03 0 0 0-1.1-.54 3.547 3.547 0 0 0-1.2-.2c-.574 0-1.114.107-1.62.32a3.98 3.98 0 0 0-1.3.9 4.175 4.175 0 0 0-.9 1.38 4.74 4.74 0 0 0-.32 1.78c0 .667.106 1.273.32 1.82.213.533.513.993.9 1.38.386.373.846.667 1.38.88.546.2 1.146.3 1.8.3a4.356 4.356 0 0 0 2.34-.68c.346-.213.653-.46.92-.74l1.48 2.34c-.334.36-.774.687-1.32.98a7.809 7.809 0 0 1-1.8.7c-.667.16-1.34.24-2.02.24Zm12.189 0c-.867 0-1.66-.107-2.38-.32a6.172 6.172 0 0 1-1.9-.94 7.512 7.512 0 0 1-1.48-1.5l1.88-2.14c.653.907 1.3 1.527 1.94 1.86.653.32 1.36.48 2.12.48.413 0 .78-.06 1.1-.18.333-.12.593-.28.78-.48a1.12 1.12 0 0 0 .28-.76c0-.213-.047-.407-.14-.58a1.39 1.39 0 0 0-.4-.48 2.58 2.58 0 0 0-.62-.38c-.24-.12-.507-.22-.8-.3a6.392 6.392 0 0 0-.96-.22c-.747-.173-1.4-.38-1.96-.62a4.902 4.902 0 0 1-1.4-.92 3.71 3.71 0 0 1-.84-1.26 4.499 4.499 0 0 1-.26-1.58c0-.6.133-1.153.4-1.66a4.08 4.08 0 0 1 1.1-1.34 5.338 5.338 0 0 1 1.64-.86c.626-.2 1.286-.3 1.98-.3.853 0 1.6.093 2.24.28.64.187 1.193.467 1.66.84.48.36.88.8 1.2 1.32l-1.9 1.84a4.753 4.753 0 0 0-.92-.94 3.25 3.25 0 0 0-1.06-.56c-.374-.133-.76-.2-1.16-.2-.44 0-.82.06-1.14.18-.32.107-.574.273-.76.5-.174.213-.26.467-.26.76 0 .24.06.453.18.64a1.7 1.7 0 0 0 .52.5c.226.133.5.253.82.36.32.107.673.2 1.06.28.733.147 1.393.34 1.98.58.586.24 1.086.533 1.5.88.426.333.753.733.98 1.2.226.453.34.967.34 1.54 0 .947-.227 1.753-.68 2.42-.454.667-1.08 1.18-1.88 1.54-.8.347-1.734.52-2.8.52Z"></path><g fill-rule="evenodd" clip-path="url(#hubspotdev-logo-45)" clip-rule="evenodd"><path fill="#33475b" d="M10.31 4.127v7.078H3.32V4.127H0v16.894h3.32v-6.847h6.99v6.847h3.32V4.127h-3.32ZM24.252 15.56c0 1.41-1.229 2.553-2.746 2.553-1.516 0-2.746-1.143-2.746-2.553V8.325h-3.148v7.235c0 3.024 2.637 5.475 5.89 5.474 3.251 0 5.887-2.45 5.887-5.474V8.325h-3.137v7.235ZM47.58 9.07c0-1.483 1.055-1.954 2.212-1.954.932 0 2.163.66 2.967 1.46l2.063-2.26c-1.03-1.293-3.118-2.189-4.827-2.189-3.415 0-5.885 1.86-5.885 4.943 0 5.72 7.52 3.905 7.52 7.105 0 .988-1.032 1.86-2.212 1.86-1.862 0-2.466-.846-3.322-1.742l-2.288 2.213c1.464 1.67 3.27 2.518 5.432 2.518 3.245 0 5.855-1.882 5.855-4.824 0-6.35-7.52-4.377-7.52-7.13h.005Zm46.52 9.253c-1.86 0-2.389-.749-2.389-1.895v-5.072h2.892v-2.57H91.71V5.395l-3.192 1.331V17.06c0 2.643 1.961 3.975 4.65 3.975.423.007.844-.024 1.26-.094l.779-2.665c-.351.022-.755.045-1.108.045v.003Zm-57.883-.236c-1.976 0-3.578-1.49-3.578-3.327 0-1.836 1.602-3.326 3.579-3.326 1.976 0 3.577 1.49 3.577 3.327s-1.601 3.326-3.577 3.326Zm.02-9.678c-1.56 0-2.647.42-3.7 1.38V4.23h-3.153v10.306c0 3.858 3 6.501 6.372 6.501 3.74 0 7.03-2.69 7.03-6.312 0-3.577-3.028-6.314-6.549-6.314Zm31.253 6.125c0 1.837-1.602 3.326-3.578 3.326-1.976 0-3.578-1.49-3.578-3.326 0-1.837 1.602-3.327 3.578-3.327 1.976 0 3.578 1.49 3.578 3.327Zm2.986.036c0-3.628-3.283-6.312-7.03-6.312-3.372 0-6.372 2.643-6.372 6.5v10.314h3.153v-5.569c1.051.959 2.14 1.38 3.698 1.38 3.521 0 6.55-2.734 6.55-6.313"></path><path fill="#ff7a59" d="M79.576 17.8c-1.948 0-3.526-1.468-3.526-3.279 0-1.81 1.578-3.277 3.526-3.277 1.947 0 3.525 1.467 3.525 3.278 0 1.81-1.579 3.278-3.526 3.278ZM80.63 8.21V5.296c.845-.367 1.388-1.155 1.392-2.023v-.068C82.019 1.968 80.94.967 79.61.963h-.073c-1.33.004-2.408 1.006-2.412 2.242v.068c.005.868.546 1.656 1.392 2.023V8.21a7.103 7.103 0 0 0-3.252 1.33l-8.61-6.227a2.34 2.34 0 0 0 .098-.63C66.756 1.287 65.54.153 64.036.15c-1.502-.002-2.721 1.13-2.723 2.526-.002 1.398 1.215 2.531 2.717 2.533a2.84 2.84 0 0 0 1.345-.34l8.465 6.126c-1.56 2.188-1.519 5.043.105 7.19l-2.575 2.395a2.378 2.378 0 0 0-.64-.097c-1.234 0-2.236.932-2.236 2.08 0 1.148 1.002 2.078 2.236 2.078 1.235 0 2.236-.93 2.236-2.079a1.919 1.919 0 0 0-.104-.594l2.549-2.369c3.015 2.142 7.327 1.605 9.63-1.199 2.304-2.803 1.727-6.812-1.289-8.954a7.152 7.152 0 0 0-3.121-1.236Z"></path></g><defs><clipPath id="hubspotdev-logo-45"><path fill="#ffffff" d="M0 0h95.298v25.25H0z"></path></clipPath></defs></svg></a><small class="private-microcopy Footer__Copyright-aouf67-5 icGxKS"><i18n-string data-locale-at-render="en-US" data-key="developer-docs-ui.footer.copyright">Copyright © 2024 HubSpot, Inc.</i18n-string></small></div><ul class="Footer__UL-aouf67-2 neSWx"><li class="Footer__LI-aouf67-3 hEeppU"><span><a class="private-link uiLinkWithoutUnderline Footer__Link-aouf67-1 bVaiDj uiLinkDark" href="https://developers.hubspot.com" rel="noopener noreferrer" tabindex="0" target="_blank" aria-disabled="false">Developer Home<span aria-label="Link opens in a new window" role="img" class="private-icon private-icon__low UILink__DefaultExternalIcon-sc-1l8kzmp-0 cvfPoO private-link--external__icon" data-icon-name="externalLink"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 gBwduT"></span></span></a></span></li><li class="Footer__LI-aouf67-3 hEeppU"><span><a class="private-link uiLinkWithoutUnderline Footer__Link-aouf67-1 bVaiDj uiLinkDark" href="https://legal.hubspot.com/legal-stuff" tabindex="0" aria-disabled="false">Legal Stuff</a></span></li><li class="Footer__LI-aouf67-3 hEeppU"><span><a class="private-link uiLinkWithoutUnderline Footer__Link-aouf67-1 bVaiDj uiLinkDark" href="https://legal.hubspot.com/privacy-policy" tabindex="0" aria-disabled="false">Privacy Policy</a></span></li><li data-test-id="footer-settings-btn" class="Footer__LI-aouf67-3 hEeppU hs-footer-cookie-settings"><a class="private-link uiLinkWithoutUnderline Footer__Link-aouf67-1 bVaiDj uiLinkDark" role="button" tabindex="0" aria-disabled="false" href="">Manage Cookies</a></li></ul></section></div><div data-test-id="MobileScrollToTop-target" class="MobileScrollToTop__Target-sc-116fnxz-0 evmaXe"></div><a data-intersecting="false" aria-disabled="false" class="MobileScrollToTop__ArrowButton-sc-116fnxz-2 kDqcyk private-button--unstyled" data-button-use="unstyled" tabindex="0" href="#top"><span class="private-icon private-icon__high MobileScrollToTop__ArrowIcon-sc-116fnxz-1 cWScek" data-icon-name="up" style="color: rgb(255, 255, 255); font-size: 24px;"><span aria-hidden="true" class="UIIcon__IconContent-sc-4mv8zq-0 ixDVnH"></span><span class="sr-only"> Scroll to top of page </span></span></a></div>